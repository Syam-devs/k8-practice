# my global config
global:
  scrape_interval:     15s # By default, scrape targets every 15 seconds.
  evaluation_interval: 15s # By default, scrape targets every 15 seconds.
  # scrape_timeout is set to the global default (10s).

  # Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager).

alerting:
  alertmanagers:
  - scheme: http
    static_configs:
    - targets:
# Load and evaluate rules in this file every 'evaluation_interval' seconds.
rule_files:
  - "alert_rules/*.yaml"
# - "second_rules.yml"

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.
  - job_name: "prometheus"

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
      - targets: ["localhost:9090"]
       # The label name is added as a label `label_name=<label_value>` to any timeseries scraped from this config.
        labels:
          app: "prometheus"
  

  - job_name: 'ec2-instances'
    ec2_sd_configs:
      - region: 'us-east-1'
        port: 9100 # Assuming Node Exporter runs on port 9100
        # Optional: Use filters to target specific instances
        filters:
          - name: 'tag:monitoring'
            values: ['true']
    relabel_configs:
      - source_labels: [__meta_ec2_tag_Name]
        target_label: name
      - source_labels: [__meta_ec2_private_ip]
        target_label: ip
      - source_labels: [__meta_ec2_instance_id]
        target_label: instance_id

  # - job_name: "node-1"

  #   # metrics_path defaults to '/metrics'
  #   # scheme defaults to 'http'.

  #   static_configs:
  #     - targets: ["44.201.99.81:9100"]
  #      # The label name is added as a label `label_name=<label_value>` to any timeseries scraped from this config.
  #       labels:
  #         app: "node-1"
  #         name: "node-1"
